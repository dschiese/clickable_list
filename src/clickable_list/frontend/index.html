<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>clickable-list</title>
  <script src="./streamlit-component-lib.js"></script>
  <script src="./main.js"></script>
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
<div id="root" style="overflow: auto"></div>
<script>
  (function() {
    function renderComponent(data) {
      if (!data || !data.options) return;

      let height = data.options.length * 50; // HÃ¶he basierend auf der Anzahl der Elemente
      const output = document.getElementById("root");
      output.innerHTML = "";  // Verhindert doppeltes Rendern

      data.options.forEach((item) => {
        let node = document.createElement("p");
        node.id = item.id;
        node.innerHTML = item.name;
        node.style.marginLeft = `${item.level * data.indent}px`;
        if (item.style) {
          node.style.cssText = item.style;
        }
        node.addEventListener("click", () => {
          Streamlit.setComponentValue(item.id);
        });

        output.appendChild(node);
      });

      Streamlit.setFrameHeight(height); // HÃ¶he nach dem Rendern setzen
    }

    window.addEventListener("message", (event) => {
      const data = event.data.args;
      if (data) renderComponent(data);
    });

    Streamlit.setComponentReady(); // Zeigt an, dass die Komponente bereit ist
  })();
</script>
</body>
</html>
